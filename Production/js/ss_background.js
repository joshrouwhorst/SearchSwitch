var SearchExtension={encodings:{}};SearchExtension.encodings.pluses=function(a){return a=a.replace(/ /g,"+"),a=encodeURI(a)},SearchExtension.encodings.standard=encodeURIComponent,SearchExtension.searchConfigs=[{name:"Google",url:"www.google.com",queryVariable:"q",resultsPage:"#",encodingFunction:SearchExtension.encodings.standard},{name:"YouTube",url:"www.youtube.com",queryVariable:"search_query",resultsPage:"results?",encodingFunction:SearchExtension.encodings.standard},{name:"Wikipedia",url:"wikipedia.org",resultsPage:"wiki/",encodingFunction:function(a){return a=a.replace(/ /g,"_"),a=encodeURIComponent(a)},checkUrl:function(a){var b=new RegExp("http(?:s)?://([^?]*)"+this.url,"g");return null!==a.match(b)?!0:!1},getQueryValue:function(a){SearchExtension.log("Getting query value of "+a);var b=a.match(/wiki\/([^?]+)/g);return SearchExtension.log("Query value - "+b),b&&b.length>0&&(b=b[b.length-1],b=b.split("wiki/")[1],b=decodeURIComponent(b),b=b.replace(/_/g," ")),b?b:!1},getQuery:function(a){return a=this.encodingFunction(a),"http://"+this.url+"/"+this.resultsPage+a}},{name:"Yahoo!",url:"search.yahoo.com",queryVariable:"p",resultsPage:"search?",encodingFunction:SearchExtension.encodings.pluses},{name:"Bing",url:"www.bing.com",queryVariable:"q",resultsPage:"search?",encodingFunction:SearchExtension.encodings.pluses}],SearchExtension.searches=[],SearchExtension.Search=function(a){var b=this;b.checkUrl=function(a){var c=new RegExp("http(?:s)?://"+b.url,"g");return null!==a.match(c)?!0:!1},b.getQueryValue=function(a){SearchExtension.log("Getting query value of "+a);var c=a.match(b.queryStringRegex);return SearchExtension.log("Query value - "+c),c&&c.length>0&&(c=c[c.length-1],c=c.split("=")[1],c=decodeURIComponent(c),c=c.replace(/\+/g," ")),c?c:!1},b.getQuery=function(a){return a=b.encodingFunction(a),"http://"+b.url+"/"+b.resultsPage+b.queryVariable+"="+a};for(var c in a)b[c]=a[c];return b.queryVariable&&!b.queryStringRegex&&(b.queryStringRegex=new RegExp(b.queryVariable+"=([^&]+)","g")),b},function(){for(var a=0;a<SearchExtension.searchConfigs.length;a++)SearchExtension.searches.push(new SearchExtension.Search(SearchExtension.searchConfigs[a]))}(),SearchExtension.main=function(a){var b=SearchExtension.getPageObj(a),c=SearchExtension.searches;if(!b.isSearch)return SearchExtension.log("Page is not a search. Quitting."),!1;SearchExtension.log("Page is a "+b.selectedSearch.name+" search.");for(var d=0;d<c.length;d++)b.searches.push({name:c[d].name,url:c[d].getQuery(b.query),currentSearch:b.selectedSearch===c[d]});return b},SearchExtension.getPageObj=function(a){a=a.toLowerCase();for(var b,c={url:a,isSearch:!1,searches:[]},d=SearchExtension.searches,e=0;e<d.length;e++)if(SearchExtension.log("Checking Search "+d[e].name+" against url: "+a+" - "+d[e].checkUrl(a)),d[e].checkUrl(a)){b=d[e].getQueryValue(a),b&&(c.query=b,c.isSearch=!0,c.selectedSearch=d[e]);break}return c},SearchExtension.log=function(a){console.log(Date()+": EVENTS.JS - "+a)},chrome.extension.onMessage.addListener(function(a,b,c){if(!(a.indexOf("page::")<=-1)){var d,e=a.split("::")[1];SearchExtension.log("Request recieved for url "+e),e&&(d=SearchExtension.main(e)),c(d)}});
//# sourceMappingURL=ss_source.map