var SearchSwitch={encodings:{}};SearchSwitch.encodings.pluses=function(a){return a=a.replace(/ /g,"+"),a=encodeURI(a)},SearchSwitch.encodings.standard=encodeURIComponent,SearchSwitch.searchConfigs=[{name:"Google",url:"www.google.com",queryVariable:"q",resultsPage:"#",encodingFunction:SearchSwitch.encodings.standard,subSearches:[{name:"Images",url:"www.google.com",queryVariable:"q",resultsPage:"#",encodingFunction:SearchSwitch.encodings.standard,getQuery:function(a){return a=this.encodingFunction(a),"http://"+this.url+"/"+this.resultsPage+this.queryVariable+"="+a+"&tbm=isch"}},{name:"Videos",url:"www.google.com",queryVariable:"q",resultsPage:"#",encodingFunction:SearchSwitch.encodings.standard,getQuery:function(a){return a=this.encodingFunction(a),"http://"+this.url+"/"+this.resultsPage+this.queryVariable+"="+a+"&tbm=vid"}}]},{name:"YouTube",url:"www.youtube.com",queryVariable:"search_query",resultsPage:"results?",encodingFunction:SearchSwitch.encodings.standard},{name:"Wikipedia",url:"wikipedia.org",resultsPage:"wiki/",encodingFunction:function(a){return a=a.replace(/ /g,"_"),a=encodeURIComponent(a)},checkUrl:function(a){var b=new RegExp("http(?:s)?://([^?]*)"+this.url,"g");return null!==a.match(b)?!0:!1},getQueryValue:function(a){SearchSwitch.log("Getting query value of "+a);var b=a.match(/wiki\/([^?]+)/g);return SearchSwitch.log("Query value - "+b),b&&b.length>0&&(b=b[b.length-1],b=b.split("wiki/")[1],b=decodeURIComponent(b),b=b.replace(/_/g," ")),b?b:!1},getQuery:function(a){return a=this.encodingFunction(a),"http://"+this.url+"/"+this.resultsPage+a}},{name:"Yahoo!",url:"search.yahoo.com",queryVariable:"p",resultsPage:"search?",encodingFunction:SearchSwitch.encodings.pluses},{name:"Bing",url:"www.bing.com",queryVariable:"q",resultsPage:"search?",encodingFunction:SearchSwitch.encodings.pluses,subSearches:[{name:"Images",url:"www.bing.com",queryVariable:"q",resultsPage:"images/search?",encodingFunction:SearchSwitch.encodings.pluses},{name:"Videos",url:"www.bing.com",queryVariable:"q",resultsPage:"videos/search?",encodingFunction:SearchSwitch.encodings.pluses}]}],SearchSwitch.searches=[],SearchSwitch.Search=function(a){var b=this,c=[];b.checkUrl=function(a){var c=new RegExp("http(?:s)?://"+b.url,"g");return null!==a.match(c)?!0:!1},b.getQueryValue=function(a){SearchSwitch.log("Getting query value of "+a);var c=a.match(b.queryStringRegex);return SearchSwitch.log("Query value - "+c),c&&c.length>0&&(c=c[c.length-1],c=c.split("=")[1],c=decodeURIComponent(c),c=c.replace(/\+/g," ")),c?c:!1},b.getQuery=function(a){return a=b.encodingFunction(a),"http://"+b.url+"/"+b.resultsPage+b.queryVariable+"="+a},b.getSubSearches=function(){return c},b.getJSON=function(a){var d={name:b.name,url:b.getQuery(a.query),currentSearch:a.selectedSearch===b,subSearches:[]};if(c.length>0)for(var e=0;e<c.length;e++)d.subSearches.push(c[e].getJSON(a));return d};for(var d in a)"subSearches"!==d&&(b[d]=a[d]);if(a.subSearches&&a.subSearches.length>0)for(var e=0;e<a.subSearches.length;e++)c.push(new SearchSwitch.Search(a.subSearches[e]));return b.queryVariable&&!b.queryStringRegex&&(b.queryStringRegex=new RegExp(b.queryVariable+"=([^&]+)","g")),b},function(){for(var a=0;a<SearchSwitch.searchConfigs.length;a++)SearchSwitch.searches.push(new SearchSwitch.Search(SearchSwitch.searchConfigs[a]))}(),SearchSwitch.main=function(a){var b=SearchSwitch.getPageObj(a),c=SearchSwitch.searches;if(!b.isSearch)return SearchSwitch.log("Page is not a search. Quitting."),!1;SearchSwitch.log("Page is a "+b.selectedSearch.name+" search."),chrome.tabs.getSelected(null,function(a){chrome.pageAction.show(a.id)});for(var d=0;d<c.length;d++)b.searches.push(c[d].getJSON(b));return b},SearchSwitch.getPageObj=function(a){a=a.toLowerCase();for(var b,c={url:a,isSearch:!1,searches:[]},d=SearchSwitch.searches,e=0;e<d.length;e++)if(SearchSwitch.log("Checking Search "+d[e].name+" against url: "+a+" - "+d[e].checkUrl(a)),d[e].checkUrl(a)){b=d[e].getQueryValue(a),b&&(c.query=b,c.isSearch=!0,c.selectedSearch=d[e]);break}return c},SearchSwitch.log=function(a){console.log(Date()+": EVENTS.JS - "+a)},chrome.extension.onMessage.addListener(function(a,b,c){if(!(a.indexOf("page::")<=-1)){var d,e=a.split("::")[1];SearchSwitch.log("Request recieved for url "+e),e&&(d=SearchSwitch.main(e)),c(d)}});
//# sourceMappingURL=source.map